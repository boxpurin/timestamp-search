# This file is for setting up a Meilisearch container for automated testing.
# It is recommended to use this with a separate .env.test file.
# Example command: docker-compose -f docker-compose.test.yml --env-file .env.test up
services:
  meilisearch:
    image: getmeili/meilisearch:v1.15.2
    container_name: meilisearch_container_test
    ports:
      # Use different ports for the test environment to avoid conflicts with development.
      # e.g., MEILI_OUTER_PORT=7701 in your .env.test file.
      - "${MEILI_OUTER_PORT}:${MEILI_INNER_PORT}"
    environment:
      MEILI_HTTP_ADDR: "${MEILI_HTTP_ADDR}"
      # It is highly recommended to use a different master key for tests.
      MEILI_MASTER_KEY: "${MEILI_MASTER_KEY}"
      MEILI_LOG_LEVEL: "${MEILI_LOG_LEVEL}"
      MEILI_ENV: "${MEILI_ENV}"
    # No persistent volume is mounted. The data will be ephemeral and will be
    # deleted when the container is removed, ensuring a clean state for every test run.
